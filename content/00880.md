---
title: Tanzu Greenplum Command Center 7.5をVMware Fusion上のRocky Linux VMにインストールするメモ
summary: この記事では、Greenplumの監視ツールTanzu Greenplum Command Centerのインストール手順と起動方法を解説します。
tags: ["Greenplum", "Greenplum Command Center", "Tanzu", "PostgreSQL", "Rocky"]
categories: ["Middleware", "RDBMS", "Greenplum", "Greenplum Command Center"]
date: 2025-12-16T06:23:20Z
updated: 2025-12-16T06:23:20Z
---

[前回の記事](/entries/879)でインストールしたGreenplumを監視するための[Tanzu Greenplum Command Center](https://techdocs.broadcom.com/us/en/vmware-tanzu/data-solutions/tanzu-greenplum-command-center/7-5/gp-command-center/welcome.html)を同じ環境にインストールします。

[Broadcom Support](https://support.broadcom.com)にログインして、[Tanzu Greenplum Command Centerのダウンロードページ](https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Tanzu%20Greenplum%20Command%20Center)にアクセスします。

最新バージョンを選択します。

![image](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1852/5fb9f335-f4d0-4204-ac83-3bce1439c4a7.png)


EL9用のインストーラーをダウンロードします。

![image](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1852/ce1fb3cd-2a0c-478e-b216-174eab5f6beb.png)


Coordinatorサーバーにscpで転送します。

```bash
scp greenplum-cc-web-7.5.1-gp7-el9-x86_64.zip root@192.168.11.200:~/Downloads/
```

Coordinatorサーバー上で作業します。

```bash
ssh root@192.168.11.200

mkdir -p /home/gpadmin/Downloads
mv ~/Downloads/greenplum-cc-web-7.5.1-gp7-el9-x86_64.zip /home/gpadmin/Downloads
chown -R gpadmin:gpadmin /home/gpadmin/Downloads
```


以下、`gpadmin`で作業します。

```bash
sudo su - gpadmin
```

`gpadmin`データベースが存在しない場合は作成します。

```bash
createdb gpadmin
```

`shared_preload_libraries`パラメータを確認し、`metrics_collector`が設定されていることを確認します。

```bash
$ gpconfig -s shared_preload_libraries
Values on all segments are consistent
GUC              : shared_preload_libraries
Coordinator value: metrics_collector
Segment     value: metrics_collector
```

`gp_enable_query_metrics`パラメータを確認し、`on`になっていることを確認します。

```bash
$ gpconfig -s gp_enable_query_metrics
Values on all segments are consistent
GUC              : gp_enable_query_metrics
Coordinator value: on
```

各サーバー上にインストール用のディレクトリとシンボリックリンクを作成します。

```bash
gpssh -f ~/hostfile_exkeys 'sudo mkdir -p /usr/local/greenplum-cc-7.5.1; sudo chown -R gpadmin:gpadmin /usr/local/greenplum-cc-7.5.1'
gpssh -f ~/hostfile_exkeys 'sudo ln -s /usr/local/greenplum-cc-7.5.1 /usr/local/greenplum-cc'
```

インストール設定ファイル`gpcc.conf`を作成し、インストールコマンドを実行します。

```bash
cd ~/Downloads
unzip greenplum-cc-web-7.5.1-gp7-el9-x86_64.zip


cat <<EOF > gpcc.conf
path = /usr/local
display_name = gpcc
master_port = 5432
web_port = 28080
rpc_port = 8899
enable_ssl = false
enable_kerberos = false
language = 1 
EOF

./greenplum-cc-web-7.5.1-gp7-el9-x86_64/gpccinstall-7.5.1 -c gpcc.conf
```

次のようなログが表示されればインストール成功です。

```
Read setup config from gpcc.conf
Greenplum Command Center will be installed in /usr/local/greenplum-cc-7.5.1

********************************************************************************
* WARNING: Your connections to GPCC will be insecure.                          *
********************************************************************************

INSTALLATION IN PROGRESS...
********************************************************************************
* Please check your .pgpass file for the default password.                     *
* We recommend changing the default password for the gpmon user unless you     *
* plan to connect through LDAP or kerberos.                                    *
********************************************************************************
CREATING SUPERUSER 'gpmon'...
CREATING COMMAND CENTER DATABASE 'gpperfmon'...
RELOADING pg_hba.conf. PLEASE WAIT ...

********************************************************************************
*                                                                              *
* INSTALLATION COMPLETED SUCCESSFULLY                                          *
*                                                                              *
* Source the gpcc_path.sh or add it to your bashrc file to use gpcc command    *
* utility.                                                                     *
*                                                                              *
* To see the GPCC web UI, you must first start the GPCC webserver.             *
*                                                                              *
* To start the GPCC webserver on the current host, run gpcc start.             *
*                                                                              *
********************************************************************************

To manage Command Center, use the gpcc command-line utility.
Usage:
  gpcc [OPTIONS] <command>

Application Options:
  -v, --version   Show Greenplum Command Center version
      --settings  Print the current configuration settings

Help Options:
  -h, --help      Show this help message

Available commands:
  help        Print list of commands
  krbdisable  Disables kerberos authentication
  krbenable   Enables kerberos authentication
  start       Starts Greenplum Command Center webserver and metrics collection agents
              with [-W] option to force password prompt for GPDB user gpmon [optional]
  status      Print agent status
              with [-W] option to force password prompt for GPDB user gpmon [optional]
  stop        Stops Greenplum Command Center webserver and metrics collection agents
              with [-W] option to force password prompt for GPDB user gpmon [optional]
```

GPCCのパスを通します。

```bash
echo 'source /usr/local/greenplum-cc/gpcc_path.sh' >> ~/.bashrc
source ~/.bashrc
```

GPCCを状態を確認します。まだ起動していないので、停止状態が表示されます。

```bash
$ gpcc status
2025-12-15 10:50:18 GPCC webserver: stopped
2025-12-15 10:50:18 GPCC agents: 0/4 agents running
```

GPCCを起動します。

```bash
$ gpcc start
2025-12-15 10:51:16 Starting the gpcc agents and webserver...
2025-12-15 10:51:16 No need to migrate gpmetrics folder from /data/coordinator/gpseg-1/gpmetrics
2025-12-15 10:51:16 redundant host gp-coordinator in cmds
2025-12-15 10:51:17 Starting GPCC 7.5.1 from /usr/local/greenplum-cc-7.5.1 ...
2025-12-15 10:51:20 Agent successfully started on 4/4 hosts
2025-12-15 10:51:20 View Greenplum Command Center at http://gp-coordinator:28080
```

GPCCの状態を再度確認します。すべて正常に起動していることが確認できます。

```bash
$ gpcc status
2025-12-15 10:51:35 GPCC webserver: running
2025-12-15 10:51:35 GPCC agents: 4/4 agents running
```

ブラウザで`http://192.168.11.200:28080`にアクセスします。ログイン画面が表示されます。

![image](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1852/f55bc078-f6a1-4f04-9a8e-57ccf19be359.png)

`/home/gpadmin/.pgpass`に書かれたユーザー名(`gpmon`)とパスワードでログインします。

![image](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1852/6d78c727-1e16-4487-aa66-5afd11ff22c7.png)
