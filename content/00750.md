---
title: Retrospective用ツールのPostfactoをHelmでインストールするメモ
tags: ["Postfacto", "Kubernetes", "Helm"]
categories: ["Dev", "Retrospectives", "Postfacto"]
---


```
helm upgrade postfacto https://github.com/making/postfacto/releases/download/0.6.0-beta/postfacto-0.6.0-beta.tgz \
 -n postfacto \
 --set service.type=LoadBalancer \
 --create-namespace \
 --install \
 --wait
```

```
helm upgrade postfacto https://github.com/making/postfacto/releases/download/0.6.0-beta/postfacto-0.6.0-beta.tgz \
 -n postfacto \
 --set service.type=ClusterIP \
 --set ingress.enabled=true \
 --set "ingress.hosts[0].host=postfacto.172-19-255-200.sslip.io" \
 --set "ingress.hosts[0].paths[0]=/" \
 --set ingress.annotations."projectcontour\.io/websocket-routes"=/ \
 --create-namespace \
 --install \
 --wait
```


```
helm upgrade postfacto https://github.com/making/postfacto/releases/download/0.6.0-beta/postfacto-0.6.0-beta.tgz \
 -n postfacto \
 --set service.type=ClusterIP \
 --set ingress.enabled=true \
 --set "ingress.hosts[0].host=postfacto.172-19-255-200.sslip.io" \
 --set "ingress.hosts[0].paths[0]=/" \
 --set-string ingress.annotations."kubernetes\.io/tls-acme"=true \
 --set ingress.annotations."cert-manager\.io/cluster-issuer"=selfsigned-cluster-issuer \
 --set ingress.annotations."projectcontour\.io/websocket-routes"=/ \
 --set "ingress.tls[0].secretName=postfacto-tls" \
 --set "ingress.tls[0].hosts[0]=postfacto.172-19-255-200.sslip.io" \
 --create-namespace \
 --install \
 --wait
```


selfsigned-cluster-issuer, postfacto.172-19-255-200.sslip.io


<img width="1024" alt="image" src="https://github.com/making/blog.ik.am/assets/106908/26defcfa-7672-4a6c-8224-a6a40a3c0f66">

```
POD_NAME=$(kubectl get pod -n postfacto -l app.kubernetes.io/instance=postfacto,app.kubernetes.io/name!=postgresql,app.kubernetes.io/name!=redis -ojsonpath='{.items[0].metadata.name}')


kubectl exec ${POD_NAME} -n postfacto -- create-admin-user admin@example.com alwaysbekind
```

`/admin`

<img width="1024" alt="image" src="https://github.com/making/blog.ik.am/assets/106908/40a9b087-9ac2-4403-aff8-70c9fdccc790">


"Retro" -> "New Retro"

<img width="1024" alt="image" src="https://github.com/making/blog.ik.am/assets/106908/b7026dc7-b7bd-440b-9084-6de123f4767d">


"Name", "Slug", "Create new Password"を入力し、"Create Retro"をクリック。ここでは`test`を入力します。

`/retro/{slug}`


<img width="1024" alt="image" src="https://github.com/making/blog.ik.am/assets/106908/0e063c2e-43a3-4fa5-b495-c7787cf10132">


<img width="1024" alt="image" src="https://github.com/making/blog.ik.am/assets/106908/9e9069bb-c653-494e-a48c-d72f0eec27f4">

<img width="1024" alt="image" src="https://github.com/making/blog.ik.am/assets/106908/99d31a56-20de-4b4b-9f75-363d09dd03d9">


```
helm delete -n postfacto postfacto 
kubectl delete pvc -n postfacto --all
```