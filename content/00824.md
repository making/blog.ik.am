---
title: Spring Bootで@Asyncを使う際にMicrometerのTrace Contextを引き継がせるメモ
tags: ["Java", "Spring Boot", "Micrometer", "Tracing"]
categories: ["Programming", "Java", "org", "springframework", "core", "task", "support"]
date: 2024-10-28T00:57:50Z
updated: 2024-10-28T01:04:44Z
---

`@Async`を使う際に Micrometer の Trace Context を引き継がせる方法を、いつも忘れるのでメモ。

https://github.com/spring-projects/spring-boot/issues/34622#issuecomment-2243481536

```java
	@Bean
	public ContextPropagatingTaskDecorator contextPropagatingTaskDecorator() {
		return new ContextPropagatingTaskDecorator();
	}
```

> [!NOTE]  
> [Spring Boot 4.1](https://docs.spring.io/spring-boot/4.1-SNAPSHOT/reference/actuator/observability.html#actuator.observability.context-propagation)で正式にサポートされるようです。
