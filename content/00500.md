---
title: Spring WebFlux.fnãƒãƒ³ã‚ºã‚ªãƒ³ - 1. ã¯ã˜ã‚ã«
tags: ["Reactor", "Reactor Netty", "Netty", "Spring 5", "Spring WebFlux", "Java", "Cloud Foundry", "Pivotal Web Services", "Pivotal Cloud Foundry"]
categories: ["Programming", "Java", "org", "springframework", "web", "reactive"]
---

æœ¬ãƒãƒ³ã‚ºã‚ªãƒ³ã§ã€æ¬¡ã®å›³ã®ã‚ˆã†ãªç°¡æ˜“å®¶è¨ˆç°¿ã®APIã‚µãƒ¼ãƒãƒ¼ã‚’Spring WebFlux.fnã‚’ä½¿ã£ã¦å®Ÿè£…ã—ã¾ã™ã€‚
ã‚ãˆã¦Spring Bootã‚‚Dependency Injectionã‚‚ä½¿ã‚ãªã„ã‚·ãƒ³ãƒ—ãƒ«ãªWebã‚¢ãƒ—ãƒªã¨ã—ã¦å®Ÿè£…ã—ã¾ã™ã€‚

![image](https://user-images.githubusercontent.com/106908/58406552-d2bb6880-80a4-11e9-8edf-e22d6015ebef.png)

ã¾ãŸãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’æŠ‘ãˆã‚‹ã“ã¨ã§ã€Cloud Foundry([Pivotal Web Services](https://run.pivotal.io))ä¸Šã§å®‰ãé‹ç”¨ã—ç¶šã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

[å®Œæˆä¾‹](https://moneyger.cfapps.io/)

æœ¬ãƒãƒ³ã‚ºã‚ªãƒ³ã¯Reactorã®çŸ¥è­˜ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ãƒãƒ³ã‚ºã‚ªãƒ³ã‚’äº‹å‰ã«å®Ÿæ–½ã—ã¦ãŠãã“ã¨ã‚’å¼·ãã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™ã€‚

* https://github.com/reactor/lite-rx-api-hands-on
* https://docs.google.com/presentation/d/1-0NopTfA-CGiCNvKPDOH9ZDMHhazKuoT-_1R69Wp8qs

**ãƒãƒ³ã‚ºã‚ªãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„**

1. [ã¯ã˜ã‚ã«](/entries/500) ğŸ‘ˆ
1. [ç°¡æ˜“å®¶è¨ˆç°¿Moneygerãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ](/entries/501)
1. [YAVIã«ã‚ˆã‚‹Validationã®å®Ÿè£…](/entries/502)
1. [R2DBCã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹](/entries/503)
1. [Web UIã®è¿½åŠ ](/entries/504)
1. [ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„](/entries/505)
1. [åå…¥APIã®å®Ÿè£…](/entries/506)

### ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—

ã¾ãšã¯Spring Bootã‚’ä½¿ã£ãŸSpring WebFlux.fnã®Hello World!ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚


ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€hello-sourceãƒ•ã‚©ãƒ«ãƒ€ã«é››å½¢ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚Windowsã®å ´åˆã¯Git Bashãªã©ã®Bashå®Ÿè¡Œç’°å¢ƒã‚’åˆ©ç”¨ã—ã¦ãã ã•ã„ã€‚

```sh
curl https://start.spring.io/starter.tgz \
       -d artifactId=hello-fn \
       -d baseDir=hello-fn \
       -d packageName=com.example \
       -d dependencies=webflux \
       -d applicationName=HelloFnApplication | tar -xzvf -
```

`hello-fn/src/main/java/com/example/HelloFnApplication.java`ã‚’æ¬¡ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚

```java
package com.example;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
// â†“ã“ã“ã‹ã‚‰è¿½åŠ 
import org.springframework.context.annotation.Bean;
import org.springframework.web.reactive.function.server.RouterFunction;
import org.springframework.web.reactive.function.server.RouterFunctions;
import org.springframework.web.reactive.function.server.ServerResponse;
// â†‘ã“ã“ã¾ã§

@SpringBootApplication
public class HelloFnApplication {

    // â†“ã“ã“ã‹ã‚‰è¿½åŠ 
    @Bean
    public RouterFunction<ServerResponse> routes() {
        return RouterFunctions.route()
            .GET("/", req -> ServerResponse.ok().syncBody("Hello World!"))
            .build();
    }
    // â†‘ã“ã“ã¾ã§

    public static void main(String[] args) {
        SpringApplication.run(HelloFnApplication.class, args);
    }

}
```

ãƒ“ãƒ«ãƒ‰ã—ã¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```
cd hello-fn
./mvnw clean package -DskipTests=true -DskipTests=true
java -jar target/hello-fn-0.0.1-SNAPSHOT.jar
```


```sh
$ curl localhost:8080
Hello World!
```

ã“ã®ã‚ã¨ã¯Spring Bootã‚’ä½¿ã‚ãªã„æ–¹æ³•ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
