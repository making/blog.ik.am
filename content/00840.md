---
title: "SkyBarium N1 ProにUbuntu 24.04をセットアップするメモ"
categories: [ "HomeLab", "Ubuntu" ]
tags: ["Ubuntu"]
date: 2025-06-18T03:00:00Z
updated: 2025-06-18T03:00:00Z
---

https://pc.watch.impress.co.jp/docs/news/todays_sales/2022822.html

を見て、クーポン込みで￥16,739だったので1台購入。激安。

セットアップ内容をメモしておく。

### Ubuntuのインストール

https://note.com/welkomiger/n/n7f669f9837b0 を参考にUSBメモリにUbuntuのISOを書き込み、インストール。

ISOは https://releases.ubuntu.com/24.04.2/ubuntu-24.04.2-live-server-amd64.iso を使用。

minimum構成を選択し、追加でopenssh-serverのみインストール。
GithubのSSH公開鍵を登録しておき、SSHのパスワード認証はOFFにしておく。

### fastfetchのインストール

```bash
sudo add-apt-repository ppa:zhangsongcui3371/fastfetch -y
sudo apt update
sudo apt install fastfetch -y
```

`fastfetch`の実行結果

![image](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1852/a5c2dc99-6cc5-49fd-9264-b0c977faacb0.png)


### 諸々インストール

```bash
sudo apt install zip unzip lsof vim nfs-common apt-transport-https ca-certificates curl gnupg -y
```


### Sudoers

```bash
sudo visudo
```

```
maki    ALL=NOPASSWD: ALL
```


### Javaのインストール

```bash
sudo mkdir -m 0755 -p /etc/apt/keyrings/
wget -q -O - https://download.bell-sw.com/pki/GPG-KEY-bellsoft | gpg --dearmor | sudo tee /etc/apt/keyrings/GPG-KEY-bellsoft.gpg > /dev/null
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/GPG-KEY-bellsoft.gpg] https://apt.bell-sw.com/ stable main" | sudo tee /etc/apt/sources.list.d/bellsoft.list
```

```bash
sudo apt update
sudo apt install bellsoft-java21 -y
```

### AWS CLIのインストール

```bash
sudo snap install aws-cli --classic
```

### Node Exporterのインストール

```bash
sudo apt install prometheus-node-exporter -y
```

### Dockerのインストール

https://docs.docker.com/engine/install/ubuntu/

```bash
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# Add the repository to Apt sources:
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt update
```

```bash
sudo apt install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin -y
```

```bash
sudo groupadd docker
sudo usermod -aG docker $USER
newgrp docker
```

### kubectlのインストール

```bash
curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.33/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg
sudo chmod 644 /etc/apt/keyrings/kubernetes-apt-keyring.gpg
```

```bash
echo 'deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.33/deb/ /' | sudo tee /etc/apt/sources.list.d/kubernetes.list
sudo chmod 644 /etc/apt/sources.list.d/kubernetes.list
```

```bash
sudo apt update
sudo apt install kubectl -y
```

### MicroK8sのインストール

```bash
KUBERNETES_VERSION=1.33
IPADDR=$(ip a show wlp2s0 | grep inet | grep -v inet6 | head -1 | awk '{print $2}' | cut -f1 -d/)
```

```bash
sudo snap install microk8s --classic --channel=${KUBERNETES_VERSION}/stable
sudo microk8s status --wait-ready
```

```bash
mkdir -p ~/.kube
sudo usermod -a -G microk8s $USER
sudo chown -R $USER ~/.kube
newgrp microk8s
```

その他の設定 https://ik.am/entries/782